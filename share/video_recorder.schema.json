{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Video Recorder Configuration",
    "type": "object",
    "properties": {
        "data_directory": {
            "type": "string",
            "description": "Directory where recorded videos will be saved"
        },
        "pipelines": {
            "type": "array",
            "items": {
                "type": "object",
                "required": [
                    "name",
                    "source"
                ],
                "properties": {
                    "name": {
                        "type": "string",
                        "description": "Name of the pipeline"
                    },
                    "source": {
                        "type": "string",
                        "description": "GStreamer source description string"
                    },
                    "record": {
                        "type": "boolean",
                        "description": "Whether to start recording by default",
                        "default": false
                    },
                    "tee_gl_view": {
                        "type": "boolean",
                        "description": "Whether to tee the stream to a GL view",
                        "default": false
                    },
                    "encoding": {
                        "type": "object",
                        "properties": {
                            "bitrate": {
                                "type": "integer",
                                "description": "Bitrate in bits per second (optional)",
                                "default": 10000
                            },
                            "speed_preset": {
                                "type": "integer",
                                "description": "x264 speed preset (1-10) (optional)",
                                "default": 2
                            },
                            "key_int_max": {
                                "type": "integer",
                                "description": "Maximum keyframe interval (optional)",
                                "default": 60
                            },
                            "frame_rate": {
                                "type": "integer",
                                "description": "Target frame rate for recording (optional)"
                            },
                            "width": {
                                "type": "integer",
                                "description": "Target width for recording (optional)"
                            },
                            "height": {
                                "type": "integer",
                                "description": "Target height for recording (optional)"
                            }
                        }
                    }
                }
            }
        }
    },
    "required": [
        "pipelines"
    ]
}